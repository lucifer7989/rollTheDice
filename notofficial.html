<!DOCTYPE html>
<html>
    <head>
        <title>loadmapasyncHTML</title>
        <style type='text/css'>
		body{
		margin:0;
		padding:0;
		overflow:hidden;
		font-family:'Segoe UI',Helvetica,Arial,Sans-Serif
		}
	</style>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
        <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?key=AiJe5h9_WGxaZZgmLmr1QU31ZFnvracrMwt7eT3x3J0NE91pP_tGBwzIBuPNYHu9'></script>
	<script type='text/javascript' src='geo03_propertyMap.js'></script>
        <script type='text/javascript'>
                var map;
		var listRecs = [
		{"name":"Carlisle Community Centre & Arena","address":"1496 Centre Road","city":"Carlisle","phone":"905-689-7283","latitude":"43.39606","longtitude":"-79.98293"},
		{"name":"Chedoke Twin Pad Arena","address":"91 Chedmac Dr.","city":"Hamilton","phone":"905-546-2429","latitude":"43.23889","longtitude":"-79.92077"},
		{"name":"Coronation Arena and Pool","address":"81 Macklin St. North","city":"Hamilton","phone":"905-546-3109","latitude":"43.2646","longtitude":"-79.89598"},
		{"name":"Eastwood Arena","address":"111 Burlington St. East","city":"Hamilton","phone":"905-546-3152","latitude":"43.27171","longtitude":"-79.8556399"},
		{"name":"Glanbrook Arena & Auditorium","address":"4300 Binbrook Road","city":"Binbrook","phone":"905-692-9331","latitude":"43.12911","longtitude":"-79.83908"},
		{"name":"Inch Park Arena & Pool","address":"400 Queensdale Ave.","city":"Hamilton","phone":"905-546-4922","latitude":"43.23712","longtitude":"-79.85937"},
		{"name":"Lawfield Arena","address":"150 Folkstone Ave.","city":"Hamilton","phone":"905-546-4923","latitude":"43.21464","longtitude":"-79.8511599"},
		{"name":"Market Street (J.L. Grightmire) Arena","address":"35 Market St. South","city":"Dundas","phone":"905-540-6678","latitude":"43.26596","longtitude":"-79.96339"},
		{"name":"Mohawk 4 Ice Centre","address":"710 Mountain Brow Blvd.","city":"Hamilton","phone":"905-318-5111","latitude":"43.21037","longtitude":"-79.81616"},
		{"name":"Morgan Firestone Arena","address":"385 Jerseyville Road West","city":"Ancaster","phone":"905-546-3769","latitude":"43.21674","longtitude":"-80.00733"},
		{"name":"Mountain (Dave Andreychuk) Arena","address":"25 Hester St.","city":"Hamilton","phone":"905-546-4938","latitude":"43.22558","longtitude":"-79.88101"},
		{"name":"North Wentworth Twin-Pad Arena","address":"27 Hwy 5","city":"Flamborough","phone":"905-689-6666","latitude":"43.3102291","longtitude":"-79.9202291"},
		{"name":"Olympic Arena","address":"70 Olympic Dr.","city":"Dundas","phone":"905-540-6686","latitude":"43.27292","longtitude":"-79.93426"},
		{"name":"Parkdale (Pat Quinn) Arena and Pool","address":"1770 Main St. East","city":"Hamilton","phone":"905-546-4785","latitude":"43.2366018","longtitude":"-79.7939014"},
		{"name":"Rosedale Arena and Pool","address":"100 Greenhill Ave.","city":"Hamilton","phone":"905-546-4805","latitude":"43.21986","longtitude":"-79.80896"},
		{"name":"Saltfleet Arena","address":"24 Sherwood Park Road","city":"Stoney Creek","phone":"905-643-3883","latitude":"43.21851","longtitude":"-79.70443"},
		{"name":"Scott Park Arena","address":"876 Cannon St. East","city":"Hamilton","phone":"905-546-4919","latitude":"43.25033","longtitude":"-79.83038"},
		{"name":"Spring Valley Arena","address":"29 Orchard Dr.","city":"Ancaster","phone":"905-648-4404","latitude":"43.217","longtitude":"-79.9977399"},
		{"name":"Stoney Creek Arena","address":"37 King St. West","city":"Stoney Creek","phone":"905-662-2426","latitude":"43.26648","longtitude":"-79.95509"},
		{"name":"Valley Park Arena & Rec Centre","address":"970 Paramount Dr.","city":"Stoney Creek","phone":"905-573-3600","latitude":"43.19332","longtitude":"-79.79796"}
			];
		
                function loadMapScenario() {
                    map = new Microsoft.Maps.Map(document.getElementById('myMap'), {});
		
			var infobox = new Microsoft.Maps.Infobox(map.getCenter(), { visible: false  });
			infobox.setMap(map); 
			
			for (var i = 0;i < listRecs.length; i++){
				var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(listRecs[i].latitude,listRecs[i].longtitude), null);
				pushpin.metadata = {title:listRecs[i].name,
							description: "nwdl"
				};

				Microsoft.Maps.Events.addHandler(pushpin, 'click', pushpinInfo); 
        			
				map.entities.push(pushpin);

			}

				

		}
		function pushpinInfo(e){

			if (e.target.metadata) {
            		//Set the infobox options with the metadata of the pushpin.
            		infobox.setOptions({
                		location: e.target.getLocation(),
                		title: e.target.metadata.title,
                		description: e.target.metadata.description,
                		visible: true
            		});
        		}	
		}
		            
        </script>
    </head>
    <body onload='loadMapScenario();'>
        <div id='printoutPanel'></div>
        
        <div id='myMap' style='width: 100vw; height: 100vh;'></div>
    </body>
</html>